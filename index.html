<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Attendance Management System</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/idb-keyval@6/dist/umd.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
  <script src="app.js" defer></script>
</head>
<body>
  <!-- header / navbar -->
  <header>
    <h1>Attendance Management</h1>
  </header>

  <!-- global filter & search panel (below header) -->
  <div id="studentFilter" class="filter-panel">
    <input type="text" id="filterStudent" placeholder="Enter name or Adm#" />

    <select id="filterPeriodType">
      <option value="">Time Period</option>
      <option value="date">Date</option>
      <option value="month">Month</option>
      <option value="semester">Semester</option>
      <option value="year">Year</option>
    </select>

    <input type="date"    id="filterDate"    class="period-input hidden" />
    <input type="month"   id="filterMonth"   class="period-input hidden" />
    <div id="filterSemester" class="period-input hidden">
      <input type="month" id="filterSemStart" /> to
      <input type="month" id="filterSemEnd" />
    </div>
    <input type="number"  id="filterYear"    class="period-input hidden" min="2000" max="2100" />

    <select id="filterStatus">
      <option value="all">All Students</option>
      <option value="eligible">Eligible</option>
      <option value="debarred">Debarred</option>
      <option value="outstanding">Outstanding</option>
      <option value="avg">Avg Attendance â‰¥ %</option>
    </select>

    <button id="applyFilter" class="btn no-print">Apply</button>
    <button id="generateBooklet" class="btn no-print">Generate PDF Booklet</button>
  </div>

  <main>
    <!-- 1. Setup Section -->
    <section id="setupSection" class="card">
      <h2>Setup</h2>
      <form id="setupForm">
        <label for="schoolNameInput">School Name</label>
        <input type="text" id="schoolNameInput" required />

        <label for="teacherClassSelect">Class</label>
        <select id="teacherClassSelect" required>
          <option value="">Select Class</option>
          <option>1</option><option>2</option><!-- etc -->
        </select>

        <label for="teacherSectionSelect">Section</label>
        <select id="teacherSectionSelect" required>
          <option value="">Select Section</option>
          <option>A</option><option>B</option><!-- etc -->
        </select>

        <button id="saveSetup" class="btn">Save Setup</button>
      </form>
      <div id="setupDisplay" class="hidden">
        <p id="setupText"></p>
        <button id="editSetup" class="btn no-print">Edit Setup</button>
      </div>
    </section>

    <!-- 2. Student Registration -->
    <section id="registrationSection" class="card">
      <h2>Student Registration</h2>
      <div id="student-registration">
        <div class="row-inline">
          <input type="text" id="studentName" placeholder="Student Name" />
          <input type="text" id="parentName" placeholder="Parent Name" />
          <input type="text" id="parentContact" placeholder="Contact" />
          <input type="text" id="parentOccupation" placeholder="Occupation" />
          <input type="text" id="parentAddress" placeholder="Address" />
          <button id="addStudent" class="btn">Add Student</button>
        </div>
        <table id="studentsTable">
          <thead>
            <tr>
              <th><input type="checkbox" id="selectAllStudents" /></th>
              <th>#</th><th>Name</th><th>Adm#</th><th>Parent</th>
              <th>Contact</th><th>Occupation</th><th>Address</th>
              <th>Outstanding</th><th>Status</th><th>Payment</th>
            </tr>
          </thead>
          <tbody id="studentsBody"></tbody>
        </table>
        <div class="row-inline">
          <button id="editSelected" class="btn no-print" disabled>Edit</button>
          <button id="deleteSelected" class="btn no-print" disabled>Delete</button>
          <button id="saveRegistration" class="btn no-print">Save</button>
          <button id="editRegistration" class="btn no-print hidden">Edit</button>
          <button id="downloadRegistrationPDF" class="btn no-print hidden">Download PDF</button>
          <button id="shareRegistration" class="btn no-print hidden">Share</button>
        </div>
      </div>
    </section>

    <!-- 3. Attendance Marking -->
    <section id="attendanceSection" class="card">
      <h2>Mark Attendance</h2>
      <input type="date" id="dateInput" />
      <button id="loadAttendance" class="btn">Load</button>
      <div id="attendanceBody" class="attendance-grid hidden"></div>
      <button id="saveAttendance" class="btn hidden">Save</button>
      <button id="resetAttendance" class="btn no-print hidden">Reset</button>
      <div id="attendanceSummary" class="hidden"></div>
      <button id="downloadAttendancePDF" class="btn no-print hidden">Download PDF</button>
      <button id="shareAttendanceSummary" class="btn no-print hidden">Share</button>
    </section>

    <!-- 4. Analytics -->
    <section id="analyticsSection" class="card">
      <h2>Analytics</h2>
      <div class="row-inline">
        <select id="analyticsTarget" class="period-input">
          <option value="">Target</option>
          <option value="section">Section</option>
          <option value="student">Student</option>
        </select>
        <select id="analyticsSectionSelect" class="period-input hidden">
          <!-- sections -->
        </select>
        <input  id="analyticsSearch" class="period-input hidden" placeholder="Name or Adm#" />
        <select id="analyticsType" disabled>
          <option value="">By</option>
          <option value="date">Date</option>
          <option value="month">Month</option>
          <option value="semester">Semester</option>
          <option value="year">Year</option>
        </select>
        <input type="date"   id="analyticsDate"    class="period-input hidden" />
        <input type="month"  id="analyticsMonth"   class="period-input hidden" />
        <input type="month"  id="semesterStart"    class="period-input hidden" />
        <input type="month"  id="semesterEnd"      class="period-input hidden" />
        <input type="number" id="yearStart"        class="period-input hidden" min="2000" max="2100" />
        <button id="loadAnalytics" class="btn">Load</button>
        <button id="resetAnalytics" class="btn no-print hidden">Reset</button>
      </div>
      <p id="instructions" class="hidden"></p>
      <div id="analyticsContainer" class="hidden">
        <canvas id="barChart" width="400" height="200"></canvas>
        <canvas id="pieChart" width="200" height="200"></canvas>
        <button id="shareAnalytics" class="btn no-print">Share</button>
        <button id="downloadAnalytics" class="btn no-print">Download PDF</button>
      </div>
      <table id="analyticsTable" class="hidden">
        <thead>
          <tr>
            <th>#</th><th>Adm#</th><th>Name</th><th>P</th><th>A</th><th>Lt</th>
            <th>HD</th><th>L</th><th>Total</th><th>%</th><th>Outstanding</th><th>Status</th>
          </tr>
        </thead>
        <tbody id="analyticsBody"></tbody>
      </table>
    </section>

    <!-- 5. Attendance Register -->
    <section id="registerSection" class="card">
      <h2>Attendance Register</h2>
      <input type="month" id="registerMonth" />
      <button id="loadRegister" class="btn">Load</button>
      <div id="registerTableWrapper" class="hidden">
        <table id="registerTable">
          <thead id="registerHeader"></thead>
          <tbody id="registerBody"></tbody>
        </table>
        <div class="row-inline no-print">
          <button id="saveRegister" class="btn">Save</button>
          <button id="changeRegister" class="btn hidden">Edit</button>
          <button id="downloadRegister" class="btn hidden">Download PDF</button>
          <button id="shareRegister" class="btn hidden">Share</button>
        </div>
      </div>
    </section>
  </main>
</body>
</html>
