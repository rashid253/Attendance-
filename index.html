<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Attendance Management</title>

  <!-- PWA & Meta -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#2196F3" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="application-name" content="Attendance Mgmt" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- idb-keyval (IIFE) -->
  <script src="https://cdn.jsdelivr.net/npm/idb-keyval@3/dist/idb-keyval-iife.min.js"></script>

  <!-- jsPDF + AutoTable (IIFE) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>

  <!-- Chart.js (IIFE) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Main CSS -->
  <link rel="stylesheet" href="style.css" />

  <style>
    /* ... your existing styles ... */
  </style>
</head>
<body>
  <!-- AUTH CONTAINER -->
  <div id="auth-container"> 
    <!-- ... auth forms ... -->
  </div>

  <!-- MAIN APP (hidden until login) -->
  <div id="main-app" class="hidden">
    <!-- ... all your app sections ... -->
  </div>

  <!-- Toggle UI between auth & main-app -->
  <script defer>
    /* ... your existing toggle code ... */
  </script>

  <!-- Single module loader for all your scripts -->
  <script type="module">
    // 1. Bootstrap authentication and routing
    import './auth.js';

    // 2. Load API helpers
    import './api.js';

    // 3. Finally run your main app logic
    import './app.js';
  </script>

  <!-- Service Worker (non-module) -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(reg => console.log('SW registered:', reg))
          .catch(err => console.error('SW registration failed:', err));
      });
    }
  </script>
</body>
</html>
